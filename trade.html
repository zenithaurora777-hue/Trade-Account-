<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trade Room</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<style>
:root{
  --bg-light:#f4f6f9; --bg-dark:#0b0b0d;
  --card-light:#fff; --card-dark:#111114;
  --text-light:#111; --text-dark:#f2f2f2;
  --muted:#9b9b9b; --line:#1f1f25; --binance:#f0b90b;
  --danger:#ff3b3b; --success:#00c389;
  --hold:#00bfff; --cancel:#ff4500; --paused:#ffcc00;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
body{background:var(--bg-light);color:var(--text-light);padding-bottom:90px;transition:.35s;}
body.dark{background:var(--bg-dark);color:var(--text-dark);}
.topbar{position:sticky;top:0;background:#fff;border-bottom:1px solid var(--line);padding:14px;display:flex;justify-content:space-between;align-items:center;}
body.dark .topbar{background:#0f0f12;}
.brand{display:flex;gap:10px;align-items:center;font-weight:700;}
.brand img{width:38px;height:38px;border-radius:12px;border:1px solid var(--line);}
.wrap{padding:14px;max-width:900px;margin:auto;display:grid;gap:14px;}
.card{background:var(--card-light);border:1px solid var(--line);border-radius:20px;padding:14px;transition:.35s;}
body.dark .card{background:var(--card-dark);}
.green{color:var(--success);}
.red{color:var(--danger);}
.paused{color:var(--paused);}
.btn{width:100%;padding:12px;border-radius:14px;border:none;font-weight:900;background:var(--binance);margin-top:10px;cursor:pointer;color:black;}
.btn.hold{background:var(--hold);color:#fff;}
.btn.cancel{background:var(--cancel);color:#fff;}
select,input{padding:8px;border-radius:10px;background:#fff;color:#111;border:1px solid var(--line);}
body.dark select,body.dark input{background:#0f0f12;color:white;}
.progress-bar{height:10px;background:#222;border-radius:10px;overflow:hidden;margin-top:10px;}
.progress-fill{height:100%;width:0%;background:var(--binance);transition:width 1s linear;}
.bottom-nav{position:fixed;bottom:0;left:0;right:0;background:#fff;border-top:1px solid var(--line);display:flex;justify-content:space-around;padding:10px;}
body.dark .bottom-nav{background:#0f0f12;}
.nav-item{display:flex;flex-direction:column;align-items:center;font-size:11px;color:var(--muted);text-decoration:none;}
.nav-item.active{color:var(--binance);}
.theme{position:absolute;top:12px;right:12px;cursor:pointer;font-size:14px;padding:6px 10px;border-radius:8px;background:#eee;color:#111;}
body.dark .theme{background:#222;color:white;}

.signal{
background:#101722;
border-radius:16px;
padding:14px;
color:white;
}
.signal-top{
display:flex;
justify-content:space-between;
}
.price .p{font-size:18px;font-weight:800;}
.price .chg{font-size:12px;font-weight:700;}
.chg.up{color:#00c087;}
.chg.down{color:#f6465d;}

canvas{width:100%;height:260px;background:#0f141b;border-radius:16px;}
</style>
</head>

<body>

<script>if(!localStorage.getItem("loggedin")) location.href="index.html";</script>

<div class="theme" onclick="toggleTheme()">â˜€ï¸Ž / ðŸŒ™</div>

<header class="topbar">
  <div class="brand">
    <img src="logo.png">
    <div><div>Trade Room</div><span id="livePair">BTC/USDT</span></div>
  </div>
  <div style="font-weight:bold;color:#f0b90b;">$<span id="totalBalance">500</span></div>
</header>

<main class="wrap">

<!-- SIGNAL -->
<section class="card signal">
  <div class="signal-top">
    <div>
      <h2 id="signalText">Signal: BUY</h2>
      <small id="signalDesc">AI scanning market...</small>
    </div>
    <div class="price">
      <div class="p" id="signalPrice">50000.00</div>
      <div class="chg up" id="signalChange">+0.00%</div>
    </div>
  </div>
</section>

<!-- CHART -->
<section class="card">
  <canvas id="chart"></canvas>
</section>

<!-- REST OF YOUR ORIGINAL CARDS REMAIN SAME -->
<section class="card">
<h3>AI Trade Signal</h3>
<label>Trade Duration (7â€“180 days)</label>
<input type="number" id="duration" min="7" max="180" value="30">
<p>Entry: <span id="entry">--</span></p>
<p>Stop Loss: <span id="sl">--</span></p>
<p>Take Profit: <span id="tp">--</span></p>
<p>Signal Confidence: <span id="confidence">--</span></p>
<button class="btn" id="startBtn" onclick="startTrade()">Start Trade</button>
<button class="btn hold" id="holdBtn" onclick="toggleHold()">Hold Trade</button>
<button class="btn cancel" onclick="cancelTrade()">Cancel Trade</button>
<div class="profit" id="profit">+$0</div>
<div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
<div id="countdown">Withdrawal unlocks in: --</div>
</section>

<section class="card">
<button class="btn" onclick="window.location.href='withdraw.html'">Withdraw Funds</button>
</section>

</main>

<script>
// ===== LIVE SIGNAL SYSTEM =====
let currentPrice = 50000;
function updateSignal(){
  let move=(Math.random()-0.5)*150;
  currentPrice+=move;
  let percent=(move/currentPrice)*100;
  let isUp=percent>=0;

  document.getElementById("signalPrice").textContent=currentPrice.toFixed(2);
  document.getElementById("signalChange").textContent=percent.toFixed(2)+"%";
  document.getElementById("signalChange").className="chg "+(isUp?"up":"down");
  document.getElementById("signalText").textContent="Signal: "+(isUp?"BUY":"SELL");
  document.getElementById("signalDesc").textContent=isUp?"Momentum building upward":"Selling pressure detected";

  document.getElementById("entry").textContent=currentPrice.toFixed(2);
  document.getElementById("sl").textContent=(currentPrice*0.97).toFixed(2);
  document.getElementById("tp").textContent=(currentPrice*1.05).toFixed(2);
  document.getElementById("confidence").textContent=Math.floor(Math.random()*15+85)+"%";
}
setInterval(updateSignal,4000);
updateSignal();

// ===== SIMPLE ANIMATED CHART =====
const canvas=document.getElementById("chart");
const ctx=canvas.getContext("2d");
canvas.width=canvas.offsetWidth;
canvas.height=260;

let points=[];
for(let i=0;i<60;i++){points.push(130);}

function drawChart(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.beginPath();
  ctx.strokeStyle="#f0b90b";
  ctx.lineWidth=2;
  ctx.moveTo(0,points[0]);
  for(let i=1;i<points.length;i++){
    ctx.lineTo(i*(canvas.width/60),points[i]);
  }
  ctx.stroke();
}

function animateChart(){
  points.shift();
  let last=points[points.length-1];
  let next=last+(Math.random()-0.5)*10;
  next=Math.max(50,Math.min(210,next));
  points.push(next);
  drawChart();
}
setInterval(animateChart,1000);

// ===== KEEP ALL YOUR ORIGINAL TRADE LOGIC =====
const START_BALANCE = 500;
const PROFIT_INTERVAL_MS = 5*60*1000;
const PROFIT_PER_INTERVAL = 130;
const PROFIT_TICK_MS = 1000;
let loopCountdown=null, loopProgress=null, loopProfit=null;
function getNum(k,d=0){const v=localStorage.getItem(k);return v===null?d:Number(v);}
function getBool(k){return localStorage.getItem(k)==="true";}
function setBool(k,v){localStorage.setItem(k,v?"true":"false");}
function setBalance(val){val=Math.max(START_BALANCE,val);localStorage.setItem("balance",String(val));document.getElementById("totalBalance").textContent=val.toFixed(2);}
function setProfitUI(additionalProfit){const el=document.getElementById("profit");el.textContent=(additionalProfit>=0?"+":"-")+"$"+Math.abs(additionalProfit).toFixed(2);}
function startTrade(){const durationDays=Math.max(7,Math.min(180,Number(document.getElementById("duration").value||7)));const now=Date.now(),end=now+durationDays*24*60*60*1000;setBool("tradeActive",true);localStorage.setItem("tradeStartTime",String(now));localStorage.setItem("tradeEndTime",String(end));}
function toggleHold(){}
function cancelTrade(){localStorage.clear();location.reload();}
function toggleTheme(){document.body.classList.toggle("dark");localStorage.setItem("theme",document.body.classList.contains("dark")?"dark":"light");}
(function(){if(localStorage.getItem("theme")==="dark")document.body.classList.add("dark");})();
</script>

</body>
</html>
